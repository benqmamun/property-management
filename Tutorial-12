Table
--------------------
CREATE TABLE "PM_PAYMENT" 
   (	"PAYMENT_NO" NUMBER GENERATED ALWAYS AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  NOT NULL ENABLE, 
	"PAYMENT_ID" VARCHAR2(50) NOT NULL ENABLE, 
	"AGREEMENT_NO" NUMBER(30,0) NOT NULL ENABLE, 
	"BILL_NO" NUMBER(30,0), 
	"CUSTOMER_NO" NUMBER(30,0) NOT NULL ENABLE, 
	"PAYMENT_DATE" DATE DEFAULT SYSDATE NOT NULL ENABLE, 
	"PAYMENT_METHOD" VARCHAR2(30) NOT NULL ENABLE, 
	"PAYMENT_REF_NO" VARCHAR2(100), 
	"CURRENCY" NUMBER, 
	"EXCHANGE_RATE" NUMBER(12,4) DEFAULT 1, 
	"PAYMENT_AMOUNT" NUMBER(15,2) NOT NULL ENABLE, 
	"STATUS" NUMBER, 
	"REMARKS" VARCHAR2(500), 
	"SS_CREATOR" NUMBER(30,0), 
	"SS_CREATED_ON" DATE DEFAULT SYSDATE, 
	"SS_MODIFIER" NUMBER(30,0), 
	"SS_MODIFIED_ON" DATE, 
	 CONSTRAINT "PK_PM_PAYMENT" PRIMARY KEY ("PAYMENT_NO")
  USING INDEX  ENABLE, 
	 CONSTRAINT "UQ_PM_PAYMENT_ID" UNIQUE ("PAYMENT_ID")
  USING INDEX  ENABLE
   ) ;

  ALTER TABLE "PM_PAYMENT" ADD CONSTRAINT "FK_PM_PAYMENT_AGR" FOREIGN KEY ("AGREEMENT_NO")
	  REFERENCES "PM_AGR_MST" ("AGR_NO") ENABLE;
  ALTER TABLE "PM_PAYMENT" ADD CONSTRAINT "FK_PM_PAYMENT_BILL" FOREIGN KEY ("BILL_NO")
	  REFERENCES "PM_BILL" ("BILL_NO") ENABLE;
  ALTER TABLE "PM_PAYMENT" ADD CONSTRAINT "FK_PM_PAYMENT_CUST" FOREIGN KEY ("CUSTOMER_NO")
	  REFERENCES "PM_CUSTOMER" ("CUSTOMER_NO") ENABLE;

Trigger
---------------------
  CREATE OR REPLACE EDITIONABLE TRIGGER "TRG_PM_PAYMENT_ID" 
BEFORE INSERT ON PM_PAYMENT
FOR EACH ROW
 WHEN (NEW.PAYMENT_ID IS NULL) DECLARE
  v_max_id NUMBER;
BEGIN
  SELECT NVL(MAX(TO_NUMBER(SUBSTR(PAYMENT_ID, 4))), 0) + 1
  INTO v_max_id
  FROM PM_PAYMENT
  WHERE REGEXP_LIKE(PAYMENT_ID, '^PAY[0-9]{3}$');

  :NEW.PAYMENT_ID := 'PAY' || LPAD(v_max_id, 3, '0');
END;
/
ALTER TRIGGER "TRG_PM_PAYMENT_ID" ENABLE;
